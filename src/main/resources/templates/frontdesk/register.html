<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="Gurdeep singh osahan">
      <meta name="author" content="Gurdeep singh osahan">
      <title>Miver</title>
      <!-- Favicon Icon -->
      <link rel="icon" type="image/png" href="/frontdesk/images/fav.svg">
      <!-- Bootstrap core CSS -->
      <link href="/frontdesk/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
      <!-- Font Awesome-->
      <link href="/frontdesk/vendor/fontawesome/css/font-awesome.min.css" rel="stylesheet">
      <!-- Material Design Icons -->
      <link href="/frontdesk/vendor/icons/css/materialdesignicons.min.css" media="all" rel="stylesheet" type="text/css">
      <!-- Slick -->
      <link href="/frontdesk/vendor/slick-master/slick/slick.css" rel="stylesheet" type="text/css">
      <!-- Lightgallery -->
      <link href="/frontdesk/vendor/lightgallery-master/dist/css/lightgallery.min.css" rel="stylesheet">
      <!-- Select2 CSS -->
<!--      <link href="/frontdesk/vendor/select2/css/select2-bootstrap.css" />-->
      <link href="/frontdesk/vendor/select2/css/select2.min.css" rel="stylesheet">
      <!-- Custom styles for this template -->
      <link href="/frontdesk/css/style.css" rel="stylesheet">
   </head>
   <body>

      <!-- Register -->
      <div class="bg-white">


         <div class="container">

            <div class="row justify-content-center align-items-center d-flex vh-100">

               <div class="col-lg-4 mx-auto">

                  <div class="osahan-login py-4">

                     <div class="text-center mb-4">
                        <a href="../backstage/index.html"><img src="/frontdesk/images/fav.svg" alt=""></a>
                        <h5 class="font-weight-bold mt-3">牛人直聘</h5>
                        <p class="text-muted">手机注册</p>
                     </div>




                     <form action="javascript:void(0);" id="smsForm" method="post">


                             <!--分配角色-->
<!--                        <div class="form-group">-->
<!--&lt;!&ndash;                           <input type="hidden" name="syllabusId" value="${syllabus_db.syllabusId}">&ndash;&gt;-->
<!--                           <div class="position-relative icon-form-control">-->
<!--                              <input name="role" id="role" type="hidden" value="1" class="form-control" placeholder="分配角色">-->
<!--                           </div>-->
<!--                        </div>-->


                        <div class="form-group">

                           <div class="position-relative icon-form-control">
                              <i class="mdi mdi-phone position-absolute"></i>
                              <input name="tel" id="tel" type="tel" class="form-control" placeholder="手机号">
                           </div>
                        </div>


                         <div class="form-group" style="float: left">

                               <input id="code" name="code" type="password" style="width: 150px;display: inline-block" class="form-control" placeholder="验证码" >

                               <div id="send" style="float: right;padding-left: 30px">

                                  <button type="button" class="btn btn-primary mb-2" onclick="sendSms()" >发送验证码</button>

                               </div>

                         </div>


                        <button id="smsSubmit" class="btn btn-success btn-block text-uppercase" type="button"> 同意并加入 </button>


                        <div class="text-center mt-3 border-bottom pb-3">
                           <p class="small text-muted">或使用邮箱</p>
                           <div class="row">
                              <div class="col-6">
                                 <button type="button" class="btn btn-outline-instagram btn-block"><i class="mdi mdi-instagram"></i> 一款图片分享应用</button>
                              </div>
                              <div class="col-6">
                                 <button type="button" class="btn btn-outline-facebook btn-block"><i class="mdi mdi-facebook"></i> Email registration</button>
                              </div>
                           </div>
                        </div>


                        <div class="py-3 d-flex align-item-center">
                           <a href="forgot-password.html">忘记密码了？</a>
                           <span class="ml-auto"> 已经上Part-time Job了？ <a href="/test/register">登录</a></span>
                        </div>


                     </form>




                  </div>

               </div>

            </div>

         </div>


      </div>


      <!-- End Register -->
      <!-- Bootstrap core JavaScript -->
      <script src="/frontdesk/vendor/jquery/jquery.min.js"></script>
      <script src="/frontdesk/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
      <!-- Contact form JavaScript -->
      <!-- Do not edit these files! In order to set the email address and subject line for the contact form go to the bin/contact_me.php file. -->
<!--      <script src="/frontdesk/js/jqBootstrapValidation.js"></script>-->
<!--      <script src="/frontdesk/js/contact_me.js"></script>-->
      <!-- Slick -->
      <script src="/frontdesk/vendor/slick-master/slick/slick.js" type="text/javascript" charset="utf-8"></script>
      <!-- lightgallery -->
      <script src="/frontdesk/vendor/lightgallery-master/dist/js/lightgallery-all.min.js"></script>
      <!-- select2 Js -->
      <script src="/frontdesk/vendor/select2/js/select2.min.js"></script>
      <!-- Custom -->
      <script src="/frontdesk/js/custom.js"></script>
   </body>
</html>

<script>




   $(function(){

      // 绑定页面元素的其他事件

      //短信进入
      $("#smsSubmit").bind("click", function() {
         smsEnter();
      });

   })


   //短信进入
   function smsEnter() {

      $.ajax({

         url:"/frontdesk/smsLogin/" + $("#code").val()+"/"+ $("#tel").val(),
         type:"get",
         //contentType: "application/json",
         //data : JSON.stringify(sms),
         success:function(data){

            console.log("==========>>>"+data)

            alert(data.info);
            if(data.info=="用户已注册，请登录"){
               //访问主页面
               location.href="/test/login"


            }else {
               if (data.info=="登入成功"){

                  location.href="/frontdesk/SubmissionPage"
               }

            }
         }
      })
      return false;
   }

   //添加
/*   function addModal() {
      var category = {};
      category.name = $("#nameForAdd").val();

      $.ajax({
         url : "/api/category",
         type : "post",
         contentType: "application/json",
         data : JSON.stringify(category),
         success : function (rs) {
            if (rs.status == 200) {
               $('#modalAdd').modal('hide');
               initTable(DEFAULT_PAFE_SIZE);
            } else {
               layer.alert(rs.message, {icon: 0});
            }
         },
         error : function (data) {
            layer.alert(data.responseText, {icon: 0});
         }
      });
   }*/



var s = 3;

//发送短信
function sendSms(){


   var tel = $("#tel").val()
   $.ajax({
      url:"/frontdesk/sendSms",
      type:"get",
      data:{"phone":tel},
      dataType:"json", //返回类型
      success:function(data){
         console.log(data)
         alert(data.info);
      }
   })


   var time = setInterval(function () {
      //禁用发送验证码按钮  class="btn btn-outline-secondary"
      $("#send").html("<button type='button'  class='btn btn-outline-secondary disabled' >"+s+"秒后发送验证码</button>")
      s--;
      if(s==0){ //倒计时结束
         //清除计时器
         clearInterval(time);
         //启用发送验证码 class="btn btn-success"
         $("#send").html("<button type='button' class='btn btn-success' onclick=\"sendSms()\">发送验证码</button>")
      }

   },1000)

}


</script>